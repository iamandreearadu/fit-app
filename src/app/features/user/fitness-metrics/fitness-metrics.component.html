<ng-container *ngIf="metrics() as m; else noData">
  <div class="fm-card">

    <div class="fm-header">
      <span class="fm-tag">Calculated Metrics</span>
      <h3 class="fm-title">Fitness Metrics</h3>
    </div>

    <div class="fm-body">

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(124,77,255,.12);border-color:rgba(124,77,255,.25)">
          <mat-icon style="color:#7C4DFF">calculate</mat-icon>
        </div>
        <span class="fm-label">BMI</span>
        <span class="fm-value">{{ m.bmi ?? '—' }}</span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(255,64,129,.1);border-color:rgba(255,64,129,.25)">
          <mat-icon style="color:#ff4081">category</mat-icon>
        </div>
        <span class="fm-label">BMI Category</span>
        <span class="fm-value">{{ m.bmiCat ?? '—' }}</span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(124,77,255,.12);border-color:rgba(124,77,255,.25)">
          <mat-icon style="color:#7C4DFF">local_fire_department</mat-icon>
        </div>
        <span class="fm-label">BMR</span>
        <span class="fm-value">{{ m.bmr ?? '—' }}<span class="fm-unit"> kcal</span></span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(255,64,129,.1);border-color:rgba(255,64,129,.25)">
          <mat-icon style="color:#ff4081">flash_on</mat-icon>
        </div>
        <span class="fm-label">TDEE</span>
        <span class="fm-value">{{ m.tdee ?? '—' }}<span class="fm-unit"> kcal</span></span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(124,77,255,.12);border-color:rgba(124,77,255,.25)">
          <mat-icon style="color:#7C4DFF">water_drop</mat-icon>
        </div>
        <span class="fm-label">Water Target</span>
        <span class="fm-value">{{ m.waterL ?? '—' }}<span class="fm-unit"> L</span></span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(255,64,129,.1);border-color:rgba(255,64,129,.25)">
          <mat-icon style="color:#ff4081">restaurant</mat-icon>
        </div>
        <span class="fm-label">Goal Calories</span>
        <span class="fm-value">{{ m.goalCalories ?? '—' }}<span class="fm-unit"> kcal</span></span>
      </div>

      <div class="fm-item">
        <div class="fm-icon" style="background:rgba(124,77,255,.12);border-color:rgba(124,77,255,.25)">
          <mat-icon style="color:#7C4DFF">emoji_events</mat-icon>
        </div>
        <span class="fm-label">Ideal Weight</span>
        <span class="fm-value">
          {{ m.idealWeightKgRange ? (m.idealWeightKgRange.min + ' – ' + m.idealWeightKgRange.max) : '—' }}
          <span class="fm-unit"> kg</span>
        </span>
      </div>

    </div>

    <div class="fm-info">
      <mat-icon>schedule</mat-icon>
      <span>Last updated: {{ m.lastCalculatedAt }}</span>
    </div>

  </div>
</ng-container>

<ng-template #noData>
  <div class="fm-empty">
    <mat-icon>info_outline</mat-icon>
    <p>No metrics available</p>
    <p class="fm-hint">Complete your physical stats to see your fitness metrics</p>
  </div>
</ng-template>
