<mat-card class="stats-card">
  <mat-card-title>Physical Stats & Goals</mat-card-title>
  <mat-card-content>
    <div *ngIf="facade.loading()" class="loader-overlay">
      <mat-progress-spinner mode="indeterminate"></mat-progress-spinner>
    </div>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="stats-form">
      <div class="form-section">
        <h4 class="section-label">Body Measurements</h4>
        <div class="two-col">
          <mat-form-field appearance="outline">
            <mat-label>Height (cm)</mat-label>
            <input matInput type="number" formControlName="heightCm">
            <mat-icon matPrefix>height</mat-icon>
            <mat-error *ngIf="form.get('heightCm')?.touched && form.get('heightCm')?.invalid">
              {{ formErrors.getMessage(form.get('heightCm')?.errors) }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Weight (kg)</mat-label>
            <input matInput type="number" formControlName="weightKg">
            <mat-icon matPrefix>monitor_weight</mat-icon>
            <mat-error *ngIf="form.get('weightKg')?.touched && form.get('weightKg')?.invalid">
              {{ formErrors.getMessage(form.get('weightKg')?.errors) }}
            </mat-error>
          </mat-form-field>
        </div>
      </div>

      <div class="form-section">
        <h4 class="section-label">Personal Details</h4>
        <div class="two-col">
          <mat-form-field appearance="outline">
            <mat-label>Age</mat-label>
            <input matInput type="number" formControlName="age">
            <mat-icon matPrefix>cake</mat-icon>
            <mat-error *ngIf="form.get('age')?.touched && form.get('age')?.invalid">
              {{ formErrors.getMessage(form.get('age')?.errors) }}
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Gender</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
              <mat-option value="other">Other</mat-option>
            </mat-select>
            <mat-icon matPrefix>wc</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <div class="form-section">
        <h4 class="section-label">Fitness Profile</h4>
        <div class="two-col">
          <mat-form-field appearance="outline">
            <mat-label>Activity Level</mat-label>
            <mat-select formControlName="activity">
              <mat-option value="sedentary">Sedentary</mat-option>
              <mat-option value="light">Light</mat-option>
              <mat-option value="moderate">Moderate</mat-option>
              <mat-option value="active">Active</mat-option>
              <mat-option value="athlete">Athlete</mat-option>
            </mat-select>
            <mat-icon matPrefix>directions_run</mat-icon>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Goal</mat-label>
            <mat-select formControlName="goal">
              <mat-option value="maintain">Maintain Weight</mat-option>
              <mat-option value="lose">Lose Weight</mat-option>
              <mat-option value="gain">Gain Weight</mat-option>
            </mat-select>
            <mat-icon matPrefix>flag</mat-icon>
          </mat-form-field>
        </div>
      </div>

      <div class="actions">
        <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">
          <mat-icon>save</mat-icon>
          Save Physical Stats
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
